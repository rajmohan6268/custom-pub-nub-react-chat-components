{"code":"import { __assign, __awaiter, __extends, __generator, __rest, __spreadArray } from \"tslib\";\r\nimport React, { Component, useEffect, useCallback } from \"react\";\r\nimport { useAtom, Provider } from \"jotai\";\r\nimport { usePubNub } from \"pubnub-react\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport setDeep from \"lodash.set\";\r\nimport { CurrentChannelAtom, ErrorFunctionAtom, MessagesAtom, RetryFunctionAtom, SubscribeChannelGroupsAtom, SubscribeChannelsAtom, ThemeAtom, TypingIndicatorAtom, TypingIndicatorTimeoutAtom, UsersMetaAtom, } from \"../state-atoms\";\r\nimport \"./chat.scss\";\r\n/**\r\n * Chat provider is used to configure various common options and feed the components with data.\r\n * It expects at least a \"current\" channel to display within components.\r\n *\r\n * Chat itself is supposed to be wrapped with a PubNubProvider component that is a part of the\r\n * PubNub React SDK. You should use it to pre-configure your PubNub instance. Please see Getting\r\n * Started page for details.\r\n */\r\nvar Chat = /** @class */ (function (_super) {\r\n    __extends(Chat, _super);\r\n    function Chat(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.state = { error: null };\r\n        return _this;\r\n    }\r\n    Chat.getDerivedStateFromError = function (error) {\r\n        return { error: error };\r\n    };\r\n    Chat.prototype.componentDidCatch = function (error) {\r\n        if (this.props.onError)\r\n            this.props.onError(error);\r\n    };\r\n    Chat.prototype.render = function () {\r\n        return (React.createElement(Provider, null,\r\n            React.createElement(ChatInternal, __assign({}, this.props))));\r\n    };\r\n    Chat.defaultProps = {\r\n        channels: [],\r\n        channelGroups: [],\r\n        theme: \"light\",\r\n        enablePresence: true,\r\n        typingIndicatorTimeout: 10,\r\n        users: [],\r\n        retryOptions: {\r\n            maxRetries: 1,\r\n            timeout: 0,\r\n            exponentialFactor: 1,\r\n        },\r\n        onError: function () { return null; },\r\n    };\r\n    return Chat;\r\n}(Component));\r\nexport { Chat };\r\n/**\r\n *\r\n *  Internal Chat wrapper with all business logic\r\n *\r\n */\r\nexport var ChatInternal = function (props) {\r\n    var pubnub = usePubNub();\r\n    var _a = useAtom(MessagesAtom), setMessages = _a[1];\r\n    var _b = useAtom(ThemeAtom), setTheme = _b[1];\r\n    var _c = useAtom(ErrorFunctionAtom), setErrorFunction = _c[1];\r\n    var _d = useAtom(RetryFunctionAtom), setRetryFunction = _d[1];\r\n    var _e = useAtom(TypingIndicatorAtom), setTypingIndicator = _e[1];\r\n    var _f = useAtom(TypingIndicatorTimeoutAtom), setTypingIndicatorTimeout = _f[1];\r\n    var _g = useAtom(UsersMetaAtom), setUsersMeta = _g[1];\r\n    var _h = useAtom(CurrentChannelAtom), currentChannel = _h[0], setCurrentChannel = _h[1];\r\n    var _j = useAtom(SubscribeChannelsAtom), channels = _j[0], setChannels = _j[1];\r\n    var _k = useAtom(SubscribeChannelGroupsAtom), channelGroups = _k[0], setChannelGroups = _k[1];\r\n    /**\r\n     * Destructure props to easily pass them to dependency arrays\r\n     */\r\n    var childrenProp = props.children, themeProp = props.theme, currentChannelProp = props.currentChannel, channelsProp = props.channels, channelGroupsProp = props.channelGroups, enablePresenceProp = props.enablePresence, usersProp = props.users, typingIndicatorTimeoutProp = props.typingIndicatorTimeout, retryOptionsProp = props.retryOptions, onMessageProp = props.onMessage, onSignalProp = props.onSignal, onMessageActionProp = props.onMessageAction, onPresenceProp = props.onPresence, onUserProp = props.onUser, onChannelProp = props.onChannel, onMembershipProp = props.onMembership, onFileProp = props.onFile, onStatusProp = props.onStatus, onErrorProp = props.onError;\r\n    /**\r\n     * Helpers\r\n     */\r\n    var retryOnError = useCallback(function (fn) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var maxRetries, timeout, exponentialFactor, _loop_1, i, state_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    maxRetries = retryOptionsProp.maxRetries, timeout = retryOptionsProp.timeout, exponentialFactor = retryOptionsProp.exponentialFactor;\r\n                    _loop_1 = function (i) {\r\n                        var _b, error_1;\r\n                        return __generator(this, function (_c) {\r\n                            switch (_c.label) {\r\n                                case 0:\r\n                                    _c.trys.push([0, 2, , 4]);\r\n                                    _b = {};\r\n                                    return [4 /*yield*/, fn()];\r\n                                case 1: return [2 /*return*/, (_b.value = _c.sent(), _b)];\r\n                                case 2:\r\n                                    error_1 = _c.sent();\r\n                                    if (maxRetries === i + 1)\r\n                                        throw error_1;\r\n                                    return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, timeout * Math.pow(exponentialFactor, i)); })];\r\n                                case 3:\r\n                                    _c.sent();\r\n                                    return [3 /*break*/, 4];\r\n                                case 4: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    };\r\n                    i = 0;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    if (!(i < maxRetries)) return [3 /*break*/, 4];\r\n                    return [5 /*yield**/, _loop_1(i)];\r\n                case 2:\r\n                    state_1 = _a.sent();\r\n                    if (typeof state_1 === \"object\")\r\n                        return [2 /*return*/, state_1.value];\r\n                    _a.label = 3;\r\n                case 3:\r\n                    i++;\r\n                    return [3 /*break*/, 1];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [retryOptionsProp]);\r\n    /**\r\n     * Event handlers\r\n     */\r\n    var handleMessage = useCallback(function (message) {\r\n        try {\r\n            setMessages(function (messages) {\r\n                var messagesClone = cloneDeep(messages) || {};\r\n                messagesClone[message.channel] = messagesClone[message.channel] || [];\r\n                messagesClone[message.channel].push(message);\r\n                return messagesClone;\r\n            });\r\n            if (onMessageProp)\r\n                onMessageProp(message);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onMessageProp, onErrorProp, setMessages]);\r\n    var handleSignalEvent = useCallback(function (signal) {\r\n        try {\r\n            if ([\"typing_on\", \"typing_off\"].includes(signal.message.type)) {\r\n                setTypingIndicator(function (indicators) {\r\n                    var indicatorsClone = cloneDeep(indicators);\r\n                    var value = signal.message.type === \"typing_on\" ? signal.timetoken : null;\r\n                    setDeep(indicatorsClone, [signal.channel, signal.publisher], value);\r\n                    return indicatorsClone;\r\n                });\r\n            }\r\n            if (onSignalProp)\r\n                onSignalProp(signal);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onSignalProp, onErrorProp, setTypingIndicator]);\r\n    var handlePresenceEvent = useCallback(function (event) {\r\n        try {\r\n            if (onPresenceProp)\r\n                onPresenceProp(event);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onPresenceProp, onErrorProp]);\r\n    var handleObjectsEvent = useCallback(function (event) {\r\n        try {\r\n            if (event.message.type === \"membership\" && onMembershipProp)\r\n                onMembershipProp(event);\r\n            if (event.message.type === \"channel\" && onChannelProp)\r\n                onChannelProp(event);\r\n            if (event.message.type === \"uuid\" && onUserProp)\r\n                onUserProp(event);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onMembershipProp, onChannelProp, onUserProp, onErrorProp]);\r\n    var handleAction = useCallback(function (action) {\r\n        try {\r\n            setMessages(function (messages) {\r\n                var _a, _b;\r\n                if (!messages || !messages[action.channel])\r\n                    return;\r\n                var channel = action.channel, event = action.event;\r\n                var _c = action.data, type = _c.type, value = _c.value, actionTimetoken = _c.actionTimetoken, messageTimetoken = _c.messageTimetoken, uuid = _c.uuid;\r\n                var messagesClone = cloneDeep(messages);\r\n                var message = messagesClone[channel].find(function (m) { return m.timetoken === messageTimetoken; });\r\n                var actions = ((_b = (_a = message === null || message === void 0 ? void 0 : message.actions) === null || _a === void 0 ? void 0 : _a[type]) === null || _b === void 0 ? void 0 : _b[value]) || [];\r\n                if (message && event === \"added\") {\r\n                    var newActions = __spreadArray(__spreadArray([], actions, true), [{ uuid: uuid, actionTimetoken: actionTimetoken }], false);\r\n                    setDeep(message, [\"actions\", type, value], newActions);\r\n                }\r\n                if (message && event === \"removed\") {\r\n                    var newActions = actions.filter(function (a) { return a.actionTimetoken !== actionTimetoken; });\r\n                    newActions.length\r\n                        ? setDeep(message, [\"actions\", type, value], newActions)\r\n                        : delete message.actions[type][value];\r\n                }\r\n                return messagesClone;\r\n            });\r\n            if (onMessageActionProp)\r\n                onMessageActionProp(action);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onMessageActionProp, onErrorProp, setMessages]);\r\n    var handleFileEvent = useCallback(function (event) {\r\n        try {\r\n            setMessages(function (messages) {\r\n                var file = event.file, message = event.message, payload = __rest(event, [\"file\", \"message\"]);\r\n                var newMessage = __assign(__assign({}, payload), { message: { file: file, message: message }, messageType: 4 });\r\n                var messagesClone = cloneDeep(messages) || {};\r\n                messagesClone[newMessage.channel] = messagesClone[newMessage.channel] || [];\r\n                messagesClone[newMessage.channel].push(newMessage);\r\n                return messagesClone;\r\n            });\r\n            if (onFileProp)\r\n                onFileProp(event);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onFileProp, onErrorProp, setMessages]);\r\n    var handleStatusEvent = useCallback(function (event) {\r\n        try {\r\n            if (onStatusProp)\r\n                onStatusProp(event);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [onStatusProp, onErrorProp]);\r\n    /**\r\n     * Lifecycle: load updateable props\r\n     */\r\n    useEffect(function () {\r\n        setUsersMeta(usersProp);\r\n    }, [usersProp, setUsersMeta]);\r\n    useEffect(function () {\r\n        setTheme(themeProp);\r\n    }, [themeProp, setTheme]);\r\n    useEffect(function () {\r\n        setCurrentChannel(currentChannelProp);\r\n    }, [currentChannelProp, setCurrentChannel]);\r\n    useEffect(function () {\r\n        setChannels(channelsProp);\r\n    }, [channelsProp, setChannels]);\r\n    useEffect(function () {\r\n        setChannelGroups(channelGroupsProp);\r\n    }, [channelGroupsProp, setChannelGroups]);\r\n    useEffect(function () {\r\n        setTypingIndicatorTimeout(typingIndicatorTimeoutProp);\r\n    }, [typingIndicatorTimeoutProp, setTypingIndicatorTimeout]);\r\n    useEffect(function () {\r\n        setErrorFunction({ function: function (error) { return onErrorProp(error); } });\r\n    }, [onErrorProp, setErrorFunction]);\r\n    useEffect(function () {\r\n        setRetryFunction({ function: function (fn) { return retryOnError(fn); } });\r\n    }, [retryOnError, setRetryFunction]);\r\n    /**\r\n     * Lifecycle: use currentChannel for subscriptions when neither channels or channelGroups is passed\r\n     */\r\n    useEffect(function () {\r\n        if (!currentChannel)\r\n            return;\r\n        if (!channels.includes(currentChannel) && !channelsProp.length && !channelGroupsProp.length) {\r\n            setChannels(__spreadArray(__spreadArray([], channels, true), [currentChannel], false));\r\n        }\r\n    }, [currentChannel, channels, channelsProp.length, channelGroupsProp.length, setChannels]);\r\n    /**\r\n     * Lifecycle: setup correct subscriptions based on channels and channelGroups\r\n     */\r\n    useEffect(function () {\r\n        if (!channels.length && !channelGroups.length)\r\n            return;\r\n        var currentSubscriptions = pubnub.getSubscribedChannels();\r\n        var currentGroups = pubnub.getSubscribedChannelGroups();\r\n        try {\r\n            var newChannels = channels.filter(function (c) { return !currentSubscriptions.includes(c); });\r\n            var oldChannels = currentSubscriptions.filter(function (c) { return !channels.includes(c); });\r\n            var newGroups = channelGroups.filter(function (c) { return !currentGroups.includes(c); });\r\n            var oldGroups = currentGroups.filter(function (c) { return !channelGroups.includes(c); });\r\n            if (newChannels.length || newGroups.length) {\r\n                pubnub.subscribe({\r\n                    channels: newChannels,\r\n                    channelGroups: newGroups,\r\n                    withPresence: enablePresenceProp,\r\n                });\r\n            }\r\n            if (oldChannels.length || oldGroups.length) {\r\n                pubnub.unsubscribe({\r\n                    channels: oldChannels,\r\n                    channelGroups: oldGroups,\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n    }, [channels, channelGroups, enablePresenceProp, onErrorProp, pubnub]);\r\n    /**\r\n     * Lifecycle: setup event listeners\r\n     */\r\n    useEffect(function () {\r\n        if (!pubnub)\r\n            return;\r\n        var listener = {\r\n            message: function (m) { return handleMessage(m); },\r\n            messageAction: function (m) { return handleAction(m); },\r\n            presence: function (e) { return handlePresenceEvent(e); },\r\n            objects: function (e) { return handleObjectsEvent(e); },\r\n            signal: function (e) { return handleSignalEvent(e); },\r\n            file: function (e) { return handleFileEvent(e); },\r\n            status: function (e) { return handleStatusEvent(e); },\r\n        };\r\n        try {\r\n            pubnub.addListener(listener);\r\n        }\r\n        catch (e) {\r\n            onErrorProp(e);\r\n        }\r\n        return function () {\r\n            if (pubnub && pubnub.removeListener) {\r\n                pubnub.removeListener(listener);\r\n            }\r\n        };\r\n    }, [\r\n        pubnub,\r\n        handleMessage,\r\n        handleAction,\r\n        handlePresenceEvent,\r\n        handleObjectsEvent,\r\n        handleSignalEvent,\r\n        handleFileEvent,\r\n        handleStatusEvent,\r\n        onErrorProp,\r\n    ]);\r\n    /**\r\n     * Lifecycle: add telemetry config to PubNub instance\r\n     */\r\n    useEffect(function () {\r\n        if (!pubnub)\r\n            return;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        pubnub._config._addPnsdkSuffix(\"chat-components\", \"RCC/0.12.0\");\r\n    }, [pubnub]);\r\n    return React.createElement(React.Fragment, null, childrenProp);\r\n};\r\n//# sourceMappingURL=chat.js.map","references":["/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/@types/react/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/jotai/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/@types/pubnub/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/pubnub-react/dist/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/src/types.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/lodash.clonedeep/index.js","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/lodash.set/index.js","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/src/state-atoms.ts"],"map":"{\"version\":3,\"file\":\"chat.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/chat/chat.tsx\"],\"names\":[],\"mappings\":\";AAAA,OAAO,KAAK,EAAE,EAAM,SAAS,EAAE,SAAS,EAAE,WAAW,EAAa,MAAM,OAAO,CAAC;AAChF,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAS1C,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAC;AAEzC,OAAO,SAAS,MAAM,kBAAkB,CAAC;AACzC,OAAO,OAAO,MAAM,YAAY,CAAC;AACjC,OAAO,EACL,kBAAkB,EAClB,iBAAiB,EACjB,YAAY,EACZ,iBAAiB,EACjB,0BAA0B,EAC1B,qBAAqB,EACrB,SAAS,EACT,mBAAmB,EACnB,0BAA0B,EAC1B,aAAa,GACd,MAAM,gBAAgB,CAAC;AACxB,OAAO,aAAa,CAAC;AA2CrB;;;;;;;GAOG;AACH;IAA0B,wBAAoB;IAC5C,cAAY,KAAgB;QAA5B,YACE,kBAAM,KAAK,CAAC,SAEb;QADC,KAAI,CAAC,KAAK,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;;IAC/B,CAAC;IAiBM,6BAAwB,GAA/B,UAAgC,KAAY;QAC1C,OAAO,EAAE,KAAK,OAAA,EAAE,CAAC;IACnB,CAAC;IAED,gCAAiB,GAAjB,UAAkB,KAAY;QAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO;YAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACpD,CAAC;IAED,qBAAM,GAAN;QACE,OAAO,CACL,oBAAC,QAAQ;YACP,oBAAC,YAAY,eAAK,IAAI,CAAC,KAAK,EAAiB,CACpC,CACZ,CAAC;IACJ,CAAC;IA7BM,iBAAY,GAAG;QACpB,QAAQ,EAAE,EAAE;QACZ,aAAa,EAAE,EAAE;QACjB,KAAK,EAAE,OAAgB;QACvB,cAAc,EAAE,IAAI;QACpB,sBAAsB,EAAE,EAAE;QAC1B,KAAK,EAAE,EAAE;QACT,YAAY,EAAE;YACZ,UAAU,EAAE,CAAC;YACb,OAAO,EAAE,CAAC;YACV,iBAAiB,EAAE,CAAC;SACrB;QACD,OAAO,EAAE,cAAY,OAAA,IAAI,EAAJ,CAAI;KAC1B,CAAC;IAiBJ,WAAC;CAAA,AApCD,CAA0B,SAAS,GAoClC;SApCY,IAAI;AAsCjB;;;;GAIG;AACH,MAAM,CAAC,IAAM,YAAY,GAAkB,UAAC,KAAgB;IAC1D,IAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IACrB,IAAA,KAAkB,OAAO,CAAC,YAAY,CAAC,EAApC,WAAW,QAAyB,CAAC;IACxC,IAAA,KAAe,OAAO,CAAC,SAAS,CAAC,EAA9B,QAAQ,QAAsB,CAAC;IAClC,IAAA,KAAuB,OAAO,CAAC,iBAAiB,CAAC,EAA9C,gBAAgB,QAA8B,CAAC;IAClD,IAAA,KAAuB,OAAO,CAAC,iBAAiB,CAAC,EAA9C,gBAAgB,QAA8B,CAAC;IAClD,IAAA,KAAyB,OAAO,CAAC,mBAAmB,CAAC,EAAlD,kBAAkB,QAAgC,CAAC;IACtD,IAAA,KAAgC,OAAO,CAAC,0BAA0B,CAAC,EAAhE,yBAAyB,QAAuC,CAAC;IACpE,IAAA,KAAmB,OAAO,CAAC,aAAa,CAAC,EAAtC,YAAY,QAA0B,CAAC;IAC1C,IAAA,KAAsC,OAAO,CAAC,kBAAkB,CAAC,EAAhE,cAAc,QAAA,EAAE,iBAAiB,QAA+B,CAAC;IAClE,IAAA,KAA0B,OAAO,CAAC,qBAAqB,CAAC,EAAvD,QAAQ,QAAA,EAAE,WAAW,QAAkC,CAAC;IACzD,IAAA,KAAoC,OAAO,CAAC,0BAA0B,CAAC,EAAtE,aAAa,QAAA,EAAE,gBAAgB,QAAuC,CAAC;IAE9E;;OAEG;IAGD,IAAU,YAAY,GAmBpB,KAAK,SAnBe,EACf,SAAS,GAkBd,KAAK,MAlBS,EACA,kBAAkB,GAiBhC,KAAK,eAjB2B,EACxB,YAAY,GAgBpB,KAAK,SAhBe,EACP,iBAAiB,GAe9B,KAAK,cAfyB,EAChB,kBAAkB,GAchC,KAAK,eAd2B,EAC3B,SAAS,GAad,KAAK,MAbS,EACQ,0BAA0B,GAYhD,KAAK,uBAZ2C,EACpC,gBAAgB,GAW5B,KAAK,aAXuB,EACnB,aAAa,GAUtB,KAAK,UAViB,EACd,YAAY,GASpB,KAAK,SATe,EACL,mBAAmB,GAQlC,KAAK,gBAR6B,EACxB,cAAc,GAOxB,KAAK,WAPmB,EAClB,UAAU,GAMhB,KAAK,OANW,EACP,aAAa,GAKtB,KAAK,UALiB,EACV,gBAAgB,GAI5B,KAAK,aAJuB,EACtB,UAAU,GAGhB,KAAK,OAHW,EACR,YAAY,GAEpB,KAAK,SAFe,EACb,WAAW,GAClB,KAAK,QADa,CACZ;IAEV;;OAEG;IAEH,IAAM,YAAY,GAAG,WAAW,CAC9B,UAAW,EAAoB;;;;;oBACrB,UAAU,GAAiC,gBAAgB,WAAjD,EAAE,OAAO,GAAwB,gBAAgB,QAAxC,EAAE,iBAAiB,GAAK,gBAAgB,kBAArB,CAAsB;wCAC3D,CAAC;;;;;;;oCAEC,qBAAM,EAAE,EAAE,EAAA;0EAAV,SAAU;;;oCAEjB,IAAI,UAAU,KAAK,CAAC,GAAG,CAAC;wCAAE,MAAM,OAAK,CAAC;oCACtC,qBAAM,IAAI,OAAO,CAAC,UAAC,OAAO,IAAK,OAAA,UAAU,CAAC,OAAO,EAAE,OAAO,GAAG,SAAA,iBAAiB,EAAI,CAAC,CAAA,CAAC,EAArD,CAAqD,CAAC,EAAA;;oCAArF,SAAqF,CAAC;;;;;;oBALjF,CAAC,GAAG,CAAC;;;yBAAE,CAAA,CAAC,GAAG,UAAU,CAAA;kDAArB,CAAC;;;;;;;oBAAsB,CAAC,EAAE,CAAA;;;;;SAQpC,EACD,CAAC,gBAAgB,CAAC,CACnB,CAAC;IAEF;;OAEG;IAEH,IAAM,aAAa,GAAG,WAAW,CAC/B,UAAC,OAAwB;QACvB,IAAI;YACF,WAAW,CAAC,UAAC,QAAQ;gBACnB,IAAM,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAChD,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtE,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC7C,OAAO,aAAa,CAAC;YACvB,CAAC,CAAC,CAAC;YAEH,IAAI,aAAa;gBAAE,aAAa,CAAC,OAAO,CAAC,CAAC;SAC3C;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,aAAa,EAAE,WAAW,EAAE,WAAW,CAAC,CAC1C,CAAC;IAEF,IAAM,iBAAiB,GAAG,WAAW,CACnC,UAAC,MAAmB;QAClB,IAAI;YACF,IAAI,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC7D,kBAAkB,CAAC,UAAC,UAAU;oBAC5B,IAAM,eAAe,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;oBAC9C,IAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;oBAC5E,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;oBACpE,OAAO,eAAe,CAAC;gBACzB,CAAC,CAAC,CAAC;aACJ;YAED,IAAI,YAAY;gBAAE,YAAY,CAAC,MAAM,CAAC,CAAC;SACxC;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,YAAY,EAAE,WAAW,EAAE,kBAAkB,CAAC,CAChD,CAAC;IAEF,IAAM,mBAAmB,GAAG,WAAW,CACrC,UAAC,KAAoB;QACnB,IAAI;YACF,IAAI,cAAc;gBAAE,cAAc,CAAC,KAAK,CAAC,CAAC;SAC3C;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,cAAc,EAAE,WAAW,CAAC,CAC9B,CAAC;IAEF,IAAM,kBAAkB,GAAG,WAAW,CACpC,UAAC,KAAuB;QACtB,IAAI;YACF,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,KAAK,YAAY,IAAI,gBAAgB;gBAAE,gBAAgB,CAAC,KAAK,CAAC,CAAC;YACrF,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,KAAK,SAAS,IAAI,aAAa;gBAAE,aAAa,CAAC,KAAK,CAAC,CAAC;YAC5E,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,KAAK,MAAM,IAAI,UAAU;gBAAE,UAAU,CAAC,KAAK,CAAC,CAAC;SACpE;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,gBAAgB,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,CAAC,CAC3D,CAAC;IAEF,IAAM,YAAY,GAAG,WAAW,CAC9B,UAAC,MAA0B;QACzB,IAAI;YACF,WAAW,CAAC,UAAC,QAAQ;;gBACnB,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC;oBAAE,OAAO;gBAE3C,IAAA,OAAO,GAAY,MAAM,QAAlB,EAAE,KAAK,GAAK,MAAM,MAAX,CAAY;gBAC5B,IAAA,KAA2D,MAAM,CAAC,IAAI,EAApE,IAAI,UAAA,EAAE,KAAK,WAAA,EAAE,eAAe,qBAAA,EAAE,gBAAgB,sBAAA,EAAE,IAAI,UAAgB,CAAC;gBAC7E,IAAM,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC1C,IAAM,OAAO,GAAG,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,SAAS,KAAK,gBAAgB,EAAhC,CAAgC,CAAC,CAAC;gBACrF,IAAM,OAAO,GAAG,CAAA,MAAA,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,0CAAG,IAAI,CAAC,0CAAG,KAAK,CAAC,KAAI,EAAE,CAAC;gBAExD,IAAI,OAAO,IAAI,KAAK,KAAK,OAAO,EAAE;oBAChC,IAAM,UAAU,mCAAO,OAAO,UAAE,EAAE,IAAI,MAAA,EAAE,eAAe,iBAAA,EAAE,SAAC,CAAC;oBAC3D,OAAO,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,UAAU,CAAC,CAAC;iBACxD;gBAED,IAAI,OAAO,IAAI,KAAK,KAAK,SAAS,EAAE;oBAClC,IAAM,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,eAAe,KAAK,eAAe,EAArC,CAAqC,CAAC,CAAC;oBAChF,UAAU,CAAC,MAAM;wBACf,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,UAAU,CAAC;wBACxD,CAAC,CAAC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;iBACzC;gBAED,OAAO,aAAa,CAAC;YACvB,CAAC,CAAC,CAAC;YAEH,IAAI,mBAAmB;gBAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC;SACtD;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,mBAAmB,EAAE,WAAW,EAAE,WAAW,CAAC,CAChD,CAAC;IAEF,IAAM,eAAe,GAAG,WAAW,CACjC,UAAC,KAAgB;QACf,IAAI;YACF,WAAW,CAAC,UAAC,QAAQ;gBACX,IAAA,IAAI,GAA0B,KAAK,KAA/B,EAAE,OAAO,GAAiB,KAAK,QAAtB,EAAK,OAAO,UAAK,KAAK,EAArC,mBAA6B,CAAF,CAAW;gBAC5C,IAAM,UAAU,yBAAQ,OAAO,KAAE,OAAO,EAAE,EAAE,IAAI,MAAA,EAAE,OAAO,SAAA,EAAE,EAAE,WAAW,EAAE,CAAC,GAAE,CAAC;gBAC9E,IAAM,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAChD,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBAC5E,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACnD,OAAO,aAAa,CAAC;YACvB,CAAC,CAAC,CAAC;YAEH,IAAI,UAAU;gBAAE,UAAU,CAAC,KAAK,CAAC,CAAC;SACnC;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,UAAU,EAAE,WAAW,EAAE,WAAW,CAAC,CACvC,CAAC;IAEF,IAAM,iBAAiB,GAAG,WAAW,CACnC,UAAC,KAAkB;QACjB,IAAI;YACF,IAAI,YAAY;gBAAE,YAAY,CAAC,KAAK,CAAC,CAAC;SACvC;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EACD,CAAC,YAAY,EAAE,WAAW,CAAC,CAC5B,CAAC;IAEF;;OAEG;IAEH,SAAS,CAAC;QACR,YAAY,CAAC,SAAS,CAAC,CAAC;IAC1B,CAAC,EAAE,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC,CAAC;IAE9B,SAAS,CAAC;QACR,QAAQ,CAAC,SAAS,CAAC,CAAC;IACtB,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE1B,SAAS,CAAC;QACR,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;IACxC,CAAC,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAC,CAAC;IAE5C,SAAS,CAAC;QACR,WAAW,CAAC,YAAY,CAAC,CAAC;IAC5B,CAAC,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC,CAAC;IAEhC,SAAS,CAAC;QACR,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;IACtC,CAAC,EAAE,CAAC,iBAAiB,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAE1C,SAAS,CAAC;QACR,yBAAyB,CAAC,0BAA0B,CAAC,CAAC;IACxD,CAAC,EAAE,CAAC,0BAA0B,EAAE,yBAAyB,CAAC,CAAC,CAAC;IAE5D,SAAS,CAAC;QACR,gBAAgB,CAAC,EAAE,QAAQ,EAAE,UAAC,KAAK,IAAK,OAAA,WAAW,CAAC,KAAK,CAAC,EAAlB,CAAkB,EAAE,CAAC,CAAC;IAChE,CAAC,EAAE,CAAC,WAAW,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAEpC,SAAS,CAAC;QACR,gBAAgB,CAAC,EAAE,QAAQ,EAAE,UAAC,EAAE,IAAK,OAAA,YAAY,CAAC,EAAE,CAAC,EAAhB,CAAgB,EAAE,CAAC,CAAC;IAC3D,CAAC,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAErC;;OAEG;IAEH,SAAS,CAAC;QACR,IAAI,CAAC,cAAc;YAAE,OAAO;QAC5B,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;YAC3F,WAAW,iCAAK,QAAQ,UAAE,cAAc,UAAE,CAAC;SAC5C;IACH,CAAC,EAAE,CAAC,cAAc,EAAE,QAAQ,EAAE,YAAY,CAAC,MAAM,EAAE,iBAAiB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC;IAE3F;;OAEG;IAEH,SAAS,CAAC;QACR,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM;YAAE,OAAO;QAEtD,IAAM,oBAAoB,GAAG,MAAM,CAAC,qBAAqB,EAAE,CAAC;QAC5D,IAAM,aAAa,GAAG,MAAM,CAAC,0BAA0B,EAAE,CAAC;QAE1D,IAAI;YACF,IAAM,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAjC,CAAiC,CAAC,CAAC;YAC9E,IAAM,WAAW,GAAG,oBAAoB,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAArB,CAAqB,CAAC,CAAC;YAE9E,IAAM,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,EAA1B,CAA0B,CAAC,CAAC;YAC1E,IAAM,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,EAA1B,CAA0B,CAAC,CAAC;YAE1E,IAAI,WAAW,CAAC,MAAM,IAAI,SAAS,CAAC,MAAM,EAAE;gBAC1C,MAAM,CAAC,SAAS,CAAC;oBACf,QAAQ,EAAE,WAAW;oBACrB,aAAa,EAAE,SAAS;oBACxB,YAAY,EAAE,kBAAkB;iBACjC,CAAC,CAAC;aACJ;YAED,IAAI,WAAW,CAAC,MAAM,IAAI,SAAS,CAAC,MAAM,EAAE;gBAC1C,MAAM,CAAC,WAAW,CAAC;oBACjB,QAAQ,EAAE,WAAW;oBACrB,aAAa,EAAE,SAAS;iBACzB,CAAC,CAAC;aACJ;SACF;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;IACH,CAAC,EAAE,CAAC,QAAQ,EAAE,aAAa,EAAE,kBAAkB,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;IAEvE;;OAEG;IAEH,SAAS,CAAC;QACR,IAAI,CAAC,MAAM;YAAE,OAAO;QAEpB,IAAM,QAAQ,GAAG;YACf,OAAO,EAAE,UAAC,CAAC,IAAK,OAAA,aAAa,CAAC,CAAC,CAAC,EAAhB,CAAgB;YAChC,aAAa,EAAE,UAAC,CAAC,IAAK,OAAA,YAAY,CAAC,CAAC,CAAC,EAAf,CAAe;YACrC,QAAQ,EAAE,UAAC,CAAC,IAAK,OAAA,mBAAmB,CAAC,CAAC,CAAC,EAAtB,CAAsB;YACvC,OAAO,EAAE,UAAC,CAAC,IAAK,OAAA,kBAAkB,CAAC,CAAC,CAAC,EAArB,CAAqB;YACrC,MAAM,EAAE,UAAC,CAAC,IAAK,OAAA,iBAAiB,CAAC,CAAC,CAAC,EAApB,CAAoB;YACnC,IAAI,EAAE,UAAC,CAAC,IAAK,OAAA,eAAe,CAAC,CAAC,CAAC,EAAlB,CAAkB;YAC/B,MAAM,EAAE,UAAC,CAAC,IAAK,OAAA,iBAAiB,CAAC,CAAC,CAAC,EAApB,CAAoB;SACpC,CAAC;QAEF,IAAI;YACF,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;SAC9B;QAAC,OAAO,CAAC,EAAE;YACV,WAAW,CAAC,CAAC,CAAC,CAAC;SAChB;QAED,OAAO;YACL,IAAI,MAAM,IAAI,MAAM,CAAC,cAAc,EAAE;gBACnC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;aACjC;QACH,CAAC,CAAC;IACJ,CAAC,EAAE;QACD,MAAM;QACN,aAAa;QACb,YAAY;QACZ,mBAAmB;QACnB,kBAAkB;QAClB,iBAAiB;QACjB,eAAe;QACf,iBAAiB;QACjB,WAAW;KACZ,CAAC,CAAC;IAEH;;OAEG;IAEH,SAAS,CAAC;QACR,IAAI,CAAC,MAAM;YAAE,OAAO;QACpB,iEAAiE;QAChE,MAAc,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;IAC3E,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,OAAO,0CAAG,YAAY,CAAI,CAAC;AAC7B,CAAC,CAAC\"}","dts":{"name":"/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/node_modules/.cache/rollup-plugin-typescript2/placeholder/chat/chat.d.ts","writeByteOrderMark":false,"text":"import { FC, Component, ReactNode } from \"react\";\r\nimport { BaseObjectsEvent, FileEvent, MessageActionEvent, PresenceEvent, SignalEvent, StatusEvent } from \"pubnub\";\r\nimport { MessageEnvelope, RetryOptions, Themes, UserEntity } from \"../types\";\r\nimport \"./chat.scss\";\r\nexport interface ChatProps {\r\n    children?: ReactNode;\r\n    /** General theme to be used by the components.\r\n     * Exact looks can be tweaked later on with the use of CSS variables. */\r\n    theme?: Themes;\r\n    /** Current channel to display the messages and members from. */\r\n    currentChannel: string;\r\n    /** Array of channels to subscribe to get events. Allows up to 50 channels. Setting this option will disable the auto subscription when switching the current channel. */\r\n    channels?: string[];\r\n    /** Array of channel groups to subscribe to get events. Allows up to 50 channel groups. Setting this option will disable the auto subscription when switching the current channel group. */\r\n    channelGroups?: string[];\r\n    /** Option to disable presence events when set to \"false.\" OccupancyIndicator and MemberList components will only work with memberships in that case. */\r\n    enablePresence?: boolean;\r\n    /** Option to provide an external list of user metadata. It's used to display information about senders on MessageList and TypingIndicator. */\r\n    users?: UserEntity[];\r\n    /** Option to define a timeout in seconds for typing indicators to hide after the last typed character. */\r\n    typingIndicatorTimeout?: number;\r\n    /** Options for automatic retries on errors. */\r\n    retryOptions?: RetryOptions;\r\n    /** Callback run on new messages. */\r\n    onMessage?: (message: MessageEnvelope) => unknown;\r\n    /** Callback run on signals. */\r\n    onSignal?: (message: SignalEvent) => unknown;\r\n    /** Callback run on message actions. */\r\n    onMessageAction?: (event: MessageActionEvent) => unknown;\r\n    /** Callback run on presence events. */\r\n    onPresence?: (event: PresenceEvent) => unknown;\r\n    /** Callback run on object events. */\r\n    onUser?: (event: BaseObjectsEvent) => unknown;\r\n    /** Callback run on object events. */\r\n    onChannel?: (event: BaseObjectsEvent) => unknown;\r\n    /** Callback run on object events. */\r\n    onMembership?: (event: BaseObjectsEvent) => unknown;\r\n    /** Callback run on file events. */\r\n    onFile?: (event: FileEvent) => unknown;\r\n    /** Callback run on status events. */\r\n    onStatus?: (event: StatusEvent) => unknown;\r\n    /** Callback run on any type of errors raised by the components. */\r\n    onError?: (error: Error) => unknown;\r\n}\r\n/**\r\n * Chat provider is used to configure various common options and feed the components with data.\r\n * It expects at least a \"current\" channel to display within components.\r\n *\r\n * Chat itself is supposed to be wrapped with a PubNubProvider component that is a part of the\r\n * PubNub React SDK. You should use it to pre-configure your PubNub instance. Please see Getting\r\n * Started page for details.\r\n */\r\nexport declare class Chat extends Component<ChatProps> {\r\n    constructor(props: ChatProps);\r\n    static defaultProps: {\r\n        channels: any[];\r\n        channelGroups: any[];\r\n        theme: \"light\";\r\n        enablePresence: boolean;\r\n        typingIndicatorTimeout: number;\r\n        users: any[];\r\n        retryOptions: {\r\n            maxRetries: number;\r\n            timeout: number;\r\n            exponentialFactor: number;\r\n        };\r\n        onError: () => void;\r\n    };\r\n    static getDerivedStateFromError(error: Error): {\r\n        error: Error;\r\n    };\r\n    componentDidCatch(error: Error): void;\r\n    render(): JSX.Element;\r\n}\r\n/**\r\n *\r\n *  Internal Chat wrapper with all business logic\r\n *\r\n */\r\nexport declare const ChatInternal: FC<ChatProps>;\r\n"}}
