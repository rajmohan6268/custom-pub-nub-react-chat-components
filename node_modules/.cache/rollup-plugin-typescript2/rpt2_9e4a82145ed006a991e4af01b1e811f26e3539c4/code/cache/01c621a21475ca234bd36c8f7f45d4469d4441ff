{"code":"import { __awaiter, __generator, __spreadArray } from \"tslib\";\r\nimport React, { useCallback, useEffect, useRef, useState, } from \"react\";\r\nimport { usePubNub } from \"pubnub-react\";\r\nimport { useAtom } from \"jotai\";\r\nimport { useAtomCallback } from \"jotai/utils\";\r\nimport { isFilePayload, } from \"../types\";\r\nimport { CurrentChannelAtom, CurrentChannelMessagesAtom, CurrentChannelPaginationAtom, ErrorFunctionAtom, RetryFunctionAtom, ThemeAtom, UsersMetaAtom, } from \"../state-atoms\";\r\nimport { getNameInitials, getPredefinedColor, useOuterClick } from \"../helpers\";\r\nimport SpinnerIcon from \"../icons/spinner.svg\";\r\nimport EmojiIcon from \"../icons/emoji.svg\";\r\nimport DownloadIcon from \"../icons/download.svg\";\r\nimport ArrowDownIcon from \"../icons/arrow-down.svg\";\r\nimport \"./message-list.scss\";\r\n/**\r\n * Fetches historical messages using the scrolling pagination pattern and subscribes to the current\r\n * channel to stay up to date with new messages.\r\n *\r\n * It also displays data in an interactive list, including\r\n * user names, avatars, the time when a message was sent, and attachments (links, images) and allows to react to\r\n * messages with emojis and to show those reactions immediately.\r\n */\r\nexport var MessageList = function (props) {\r\n    var pubnub = usePubNub();\r\n    var channel = useAtom(CurrentChannelAtom)[0];\r\n    var users = useAtom(UsersMetaAtom)[0];\r\n    var theme = useAtom(ThemeAtom)[0];\r\n    var retryObj = useAtom(RetryFunctionAtom)[0];\r\n    var onErrorObj = useAtom(ErrorFunctionAtom)[0];\r\n    var messages = useAtom(CurrentChannelMessagesAtom)[0];\r\n    var paginationEnd = useAtom(CurrentChannelPaginationAtom)[0];\r\n    var retry = retryObj.function;\r\n    var onError = onErrorObj.function;\r\n    var _a = useState(true), scrolledBottom = _a[0], setScrolledBottom = _a[1];\r\n    var _b = useState([]), prevMessages = _b[0], setPrevMessages = _b[1];\r\n    var _c = useState(0), unreadMessages = _c[0], setUnreadMessages = _c[1];\r\n    var _d = useState(false), fetchingMessages = _d[0], setFetchingMessages = _d[1];\r\n    var _e = useState(), picker = _e[0], setPicker = _e[1];\r\n    var _f = useState(false), emojiPickerShown = _f[0], setEmojiPickerShown = _f[1];\r\n    var _g = useState(null), reactingToMessage = _g[0], setReactingToMessage = _g[1];\r\n    var endRef = useRef(null);\r\n    var listRef = useRef(null);\r\n    var spinnerRef = useRef(null);\r\n    var pickerRef = useOuterClick(function (event) {\r\n        if (event.target.closest(\".pn-msg__reactions-toggle\"))\r\n            return;\r\n        setEmojiPickerShown(false);\r\n    });\r\n    var listSizeObserver = useRef(new ResizeObserver(function () { return handleListMutations(); }));\r\n    var listMutObserver = useRef(new MutationObserver(function () { return handleListMutations(); }));\r\n    var spinnerIntObserver = useRef(new IntersectionObserver(function (e) { return e[0].isIntersecting === true && fetchMoreHistory(); }));\r\n    var bottomIntObserver = useRef(new IntersectionObserver(function (e) { return handleBottomIntersection(e[0].isIntersecting); }));\r\n    /*\r\n    /* Helper functions\r\n    */\r\n    var getTime = function (timestamp) {\r\n        var ts = String(timestamp);\r\n        var date = new Date(parseInt(ts) / 10000);\r\n        var formatter = new Intl.DateTimeFormat([], { timeStyle: \"short\" });\r\n        return formatter.format(date);\r\n    };\r\n    var scrollToBottom = function () {\r\n        if (!endRef.current)\r\n            return;\r\n        setScrolledBottom(true);\r\n        endRef.current.scrollIntoView({ block: \"end\" });\r\n    };\r\n    var setupSpinnerObserver = function () {\r\n        if (!spinnerRef.current)\r\n            return;\r\n        spinnerIntObserver.current.observe(spinnerRef.current);\r\n    };\r\n    var setupBottomObserver = function () {\r\n        if (!endRef.current)\r\n            return;\r\n        bottomIntObserver.current.disconnect();\r\n        bottomIntObserver.current.observe(endRef.current);\r\n    };\r\n    var setupListObservers = function () {\r\n        if (!listRef.current)\r\n            return;\r\n        listSizeObserver.current.disconnect();\r\n        listSizeObserver.current.observe(listRef.current);\r\n        listMutObserver.current.disconnect();\r\n        listMutObserver.current.observe(listRef.current, { childList: true });\r\n    };\r\n    var getUser = function (uuid) {\r\n        return users.find(function (u) { return u.id === uuid; });\r\n    };\r\n    var isOwnMessage = function (uuid) {\r\n        return pubnub.getUUID() === uuid;\r\n    };\r\n    /*\r\n    /* Commands\r\n    */\r\n    var fetchHistory = function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var history_1, e_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!props.fetchMessages)\r\n                        return [2 /*return*/];\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    setFetchingMessages(true);\r\n                    return [4 /*yield*/, retry(function () {\r\n                            return pubnub.fetchMessages({\r\n                                channels: [channel],\r\n                                count: props.fetchMessages,\r\n                                includeMessageActions: true,\r\n                            });\r\n                        })];\r\n                case 2:\r\n                    history_1 = _a.sent();\r\n                    handleHistoryFetch(history_1);\r\n                    scrollToBottom();\r\n                    setupSpinnerObserver();\r\n                    setupBottomObserver();\r\n                    return [3 /*break*/, 5];\r\n                case 3:\r\n                    e_1 = _a.sent();\r\n                    onError(e_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setFetchingMessages(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    /** useAtomCallback to accesses jotai atoms inside of a Intersection Observer callback */\r\n    var fetchMoreHistory = useAtomCallback(useCallback(function (get) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var channel, retryObj, errorObj, messages, retry, onError, firstMessage, history_2, e_2;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    channel = get(CurrentChannelAtom);\r\n                    retryObj = get(RetryFunctionAtom);\r\n                    errorObj = get(ErrorFunctionAtom);\r\n                    messages = get(CurrentChannelMessagesAtom);\r\n                    retry = retryObj.function;\r\n                    onError = errorObj.function;\r\n                    firstMessage = (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".pn-msg\");\r\n                    if (!messages.length)\r\n                        return [2 /*return*/];\r\n                    _b.label = 1;\r\n                case 1:\r\n                    _b.trys.push([1, 3, , 4]);\r\n                    return [4 /*yield*/, retry(function () {\r\n                            return pubnub.fetchMessages({\r\n                                channels: [channel],\r\n                                count: props.fetchMessages,\r\n                                start: (messages === null || messages === void 0 ? void 0 : messages[0].timetoken) || undefined,\r\n                                includeMessageActions: true,\r\n                            });\r\n                        })];\r\n                case 2:\r\n                    history_2 = _b.sent();\r\n                    handleHistoryFetch(history_2);\r\n                    if (firstMessage)\r\n                        firstMessage.scrollIntoView();\r\n                    return [3 /*break*/, 4];\r\n                case 3:\r\n                    e_2 = _b.sent();\r\n                    onError(e_2);\r\n                    return [3 /*break*/, 4];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, []));\r\n    var addReaction = function (reaction, messageTimetoken) {\r\n        try {\r\n            pubnub.addMessageAction({\r\n                channel: channel,\r\n                messageTimetoken: messageTimetoken,\r\n                action: {\r\n                    type: \"reaction\",\r\n                    value: reaction,\r\n                },\r\n            });\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    };\r\n    var removeReaction = function (reaction, messageTimetoken, actionTimetoken) {\r\n        try {\r\n            pubnub.removeMessageAction({ channel: channel, messageTimetoken: messageTimetoken, actionTimetoken: actionTimetoken });\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    };\r\n    var fetchFileUrl = function (envelope) {\r\n        if (!isFilePayload(envelope.message))\r\n            return envelope;\r\n        try {\r\n            var url = pubnub.getFileUrl({\r\n                channel: envelope.channel,\r\n                id: envelope.message.file.id,\r\n                name: envelope.message.file.name,\r\n            });\r\n            envelope.message.file.url = url;\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n        finally {\r\n            return envelope;\r\n        }\r\n    };\r\n    /*\r\n    /* Event handlers\r\n    */\r\n    var handleEmojiInsertion = useCallback(function (emoji) {\r\n        try {\r\n            if (!(\"native\" in emoji))\r\n                return;\r\n            addReaction(emoji.native, reactingToMessage);\r\n            setEmojiPickerShown(false);\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    }, [reactingToMessage]);\r\n    var handleBottomIntersection = function (isIntersecting) {\r\n        try {\r\n            if (isIntersecting)\r\n                setUnreadMessages(0);\r\n            setScrolledBottom(isIntersecting);\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    };\r\n    var handleListMutations = function () {\r\n        try {\r\n            setScrolledBottom(function (scrolledBottom) {\r\n                if (scrolledBottom)\r\n                    scrollToBottom();\r\n                return scrolledBottom;\r\n            });\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    };\r\n    var handleHistoryFetch = useAtomCallback(useCallback(function (get, set, response) {\r\n        var channel = get(CurrentChannelAtom);\r\n        var messages = get(CurrentChannelMessagesAtom);\r\n        var newMessages = ((response === null || response === void 0 ? void 0 : response.channels[channel]) || []).map(function (m) {\r\n            return m.messageType === 4 ? fetchFileUrl(m) : m;\r\n        }) || [];\r\n        var allMessages = __spreadArray(__spreadArray([], messages, true), newMessages, true).sort(function (a, b) { return a.timetoken - b.timetoken; });\r\n        setEmojiPickerShown(false);\r\n        setPrevMessages(allMessages);\r\n        set(CurrentChannelMessagesAtom, allMessages);\r\n        set(CurrentChannelPaginationAtom, !allMessages.length || newMessages.length !== props.fetchMessages);\r\n    }, []));\r\n    var handleOpenReactions = function (event, timetoken) {\r\n        try {\r\n            var newPickerTopPosition = listRef.current.scrollTop -\r\n                listRef.current.getBoundingClientRect().top +\r\n                event.target.getBoundingClientRect().y;\r\n            if (newPickerTopPosition > pickerRef.current.offsetHeight) {\r\n                newPickerTopPosition += event.target.getBoundingClientRect().height;\r\n                newPickerTopPosition -= pickerRef.current.offsetHeight;\r\n            }\r\n            pickerRef.current.style.top = \"\".concat(newPickerTopPosition, \"px\");\r\n            setEmojiPickerShown(true);\r\n            setReactingToMessage(timetoken);\r\n        }\r\n        catch (e) {\r\n            onError(e);\r\n        }\r\n    };\r\n    /*\r\n    /* Lifecycle\r\n    */\r\n    useEffect(function () {\r\n        if (!pubnub || !channel)\r\n            return;\r\n        if (!(messages === null || messages === void 0 ? void 0 : messages.length))\r\n            fetchHistory();\r\n        setupSpinnerObserver();\r\n        setupListObservers();\r\n    }, [channel]);\r\n    useEffect(function () {\r\n        if (React.isValidElement(props.reactionsPicker)) {\r\n            setPicker(React.cloneElement(props.reactionsPicker, { onSelect: handleEmojiInsertion }));\r\n        }\r\n    }, [props.reactionsPicker, handleEmojiInsertion]);\r\n    useEffect(function () {\r\n        if (!(messages === null || messages === void 0 ? void 0 : messages.length))\r\n            return;\r\n        var messagesFromListener = messages.length - prevMessages.length;\r\n        if (scrolledBottom)\r\n            scrollToBottom();\r\n        if (!scrolledBottom && messagesFromListener)\r\n            setUnreadMessages(unreadMessages + messagesFromListener);\r\n        setupBottomObserver();\r\n        setPrevMessages(messages);\r\n    }, [messages]);\r\n    /*\r\n    /* Renderers\r\n    */\r\n    var renderWelcomeMessages = function () {\r\n        if (!props.welcomeMessages)\r\n            return;\r\n        return Array.isArray(props.welcomeMessages)\r\n            ? props.welcomeMessages.map(function (m) { return renderItem(m); })\r\n            : renderItem(props.welcomeMessages);\r\n    };\r\n    var renderItem = function (envelope) {\r\n        var uuid = envelope.uuid || envelope.publisher || \"\";\r\n        var currentUserClass = isOwnMessage(uuid) ? \"pn-msg--own\" : \"\";\r\n        var actions = envelope.actions;\r\n        var deleted = !!Object.keys((actions === null || actions === void 0 ? void 0 : actions.deleted) || {}).length;\r\n        var message = isFilePayload(envelope.message) ? envelope.message.message : envelope.message;\r\n        if (deleted)\r\n            return;\r\n        return (React.createElement(\"div\", { className: \"pn-msg \".concat(currentUserClass), key: envelope.timetoken },\r\n            renderMessage(envelope),\r\n            React.createElement(\"div\", { className: \"pn-msg__actions\" },\r\n                props.extraActionsRenderer && props.extraActionsRenderer(envelope),\r\n                props.reactionsPicker && (message === null || message === void 0 ? void 0 : message.type) !== \"welcome\" && (React.createElement(\"div\", { className: \"pn-msg__reactions-toggle\", title: \"Add a reaction\", onClick: function (e) {\r\n                        emojiPickerShown && reactingToMessage === envelope.timetoken\r\n                            ? setEmojiPickerShown(false)\r\n                            : handleOpenReactions(e, envelope.timetoken);\r\n                    } },\r\n                    React.createElement(EmojiIcon, null))))));\r\n    };\r\n    var renderMessage = function (envelope) {\r\n        var uuid = envelope.uuid || envelope.publisher || \"\";\r\n        var time = getTime(envelope.timetoken);\r\n        var isOwn = isOwnMessage(uuid);\r\n        var message = isFilePayload(envelope.message) ? envelope.message.message : envelope.message;\r\n        var user = (message === null || message === void 0 ? void 0 : message.sender) || getUser(uuid);\r\n        var attachments = (message === null || message === void 0 ? void 0 : message.attachments) || [];\r\n        var file = isFilePayload(envelope.message) && envelope.message.file;\r\n        var actions = envelope.actions;\r\n        var editedText = (Object.entries((actions === null || actions === void 0 ? void 0 : actions.updated) || {}).pop() || []).shift();\r\n        if (props.messageRenderer && (props.filter ? props.filter(envelope) : true))\r\n            return props.messageRenderer({ message: envelope, user: user, time: time, isOwn: isOwn, editedText: editedText });\r\n        return (React.createElement(React.Fragment, null,\r\n            React.createElement(\"div\", { className: \"pn-msg__avatar\", style: { backgroundColor: getPredefinedColor(uuid) } }, (user === null || user === void 0 ? void 0 : user.profileUrl) ? (React.createElement(\"img\", { src: user.profileUrl, alt: \"User avatar\" })) : (getNameInitials((user === null || user === void 0 ? void 0 : user.name) || uuid))),\r\n            React.createElement(\"div\", { className: \"pn-msg__main\" },\r\n                React.createElement(\"div\", { className: \"pn-msg__content\" },\r\n                    React.createElement(\"div\", { className: \"pn-msg__title\" },\r\n                        React.createElement(\"span\", { className: \"pn-msg__author\" }, (user === null || user === void 0 ? void 0 : user.name) || uuid),\r\n                        React.createElement(\"span\", { className: \"pn-msg__time\" }, time)),\r\n                    (message === null || message === void 0 ? void 0 : message.text) &&\r\n                        (props.bubbleRenderer && (props.filter ? props.filter(envelope) : true) ? (props.bubbleRenderer({ message: envelope, user: user, time: time, isOwn: isOwn, editedText: editedText })) : (React.createElement(\"div\", { className: \"pn-msg__bubble\" }, editedText || (message === null || message === void 0 ? void 0 : message.text))))),\r\n                React.createElement(\"div\", { className: \"pn-msg__extras\" },\r\n                    file && file.name && renderFile(file),\r\n                    attachments.map(renderAttachment),\r\n                    props.enableReactions && renderReactions(envelope)))));\r\n    };\r\n    var renderReactions = function (envelope) {\r\n        var _a;\r\n        var reactions = (_a = envelope.actions) === null || _a === void 0 ? void 0 : _a.reaction;\r\n        if (!reactions)\r\n            return;\r\n        return (React.createElement(\"div\", { className: \"pn-msg__reactions\" }, Object.keys(reactions).map(function (reaction) {\r\n            var instances = reactions[reaction];\r\n            var instancesLimit = 99;\r\n            var instancesLimited = instances.slice(0, instancesLimit);\r\n            var instancesOverLimit = instances.length - instancesLimited.length;\r\n            var userReaction = instances === null || instances === void 0 ? void 0 : instances.find(function (i) { return i.uuid === pubnub.getUUID(); });\r\n            var userNames = instancesLimited.map(function (i) {\r\n                var user = users.find(function (u) { return u.id === i.uuid; });\r\n                return user ? user.name : i.uuid;\r\n            });\r\n            var tooltipContent = \"\\n            \".concat(userNames.join(\", \"), \"\\n            \").concat(instancesOverLimit ? \"and \".concat(instancesOverLimit, \" more\") : \"\", \"\\n          \");\r\n            return (React.createElement(\"div\", { className: \"pn-tooltip pn-msg__reaction \".concat(userReaction ? \"pn-msg__reaction--active\" : \"\"), key: reaction, \"data-tooltip\": tooltipContent, onClick: function () {\r\n                    userReaction\r\n                        ? removeReaction(reaction, envelope.timetoken, userReaction.actionTimetoken)\r\n                        : addReaction(reaction, envelope.timetoken);\r\n                } },\r\n                reaction,\r\n                \" \",\r\n                instancesLimited.length,\r\n                instancesOverLimit ? \"+\" : \"\"));\r\n        })));\r\n    };\r\n    var renderFile = function (file) {\r\n        return (React.createElement(\"div\", { className: \"pn-msg__file\" }, /\\.(svg|gif|jpe?g|tiff?|png|webp|bmp)$/i.test(file.name) ? (React.createElement(\"img\", { alt: file.name, className: \"pn-msg__image\", src: file.url, onLoad: function () {\r\n                if (scrolledBottom)\r\n                    scrollToBottom();\r\n            } })) : (React.createElement(\"div\", { className: \"pn-msg__bubble\" },\r\n            React.createElement(\"a\", { className: \"pn-msg__nonImage\", href: file.url, target: \"_blank\", rel: \"noopener noreferrer\", download: true },\r\n                file.name,\r\n                React.createElement(DownloadIcon, { className: \"pn-msg__downloadIcon\" }))))));\r\n    };\r\n    var renderAttachment = function (attachment, key) {\r\n        var _a, _b, _c, _d, _e;\r\n        return (React.createElement(\"div\", { key: key, className: \"pn-msg__attachments\" },\r\n            attachment.type === \"image\" && (React.createElement(\"img\", { className: \"pn-msg__image\", src: (_a = attachment.image) === null || _a === void 0 ? void 0 : _a.source })),\r\n            attachment.type === \"link\" && (React.createElement(\"a\", { className: \"pn-msg__link\", href: (_b = attachment.provider) === null || _b === void 0 ? void 0 : _b.url, target: \"_blank\", rel: \"noreferrer noopener\" },\r\n                React.createElement(\"img\", { src: (_c = attachment.image) === null || _c === void 0 ? void 0 : _c.source }),\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"p\", { className: \"pn-msg__link-name\" },\r\n                        React.createElement(\"img\", { src: (_d = attachment.icon) === null || _d === void 0 ? void 0 : _d.source }), (_e = attachment.provider) === null || _e === void 0 ? void 0 :\r\n                        _e.name),\r\n                    React.createElement(\"p\", { className: \"pn-msg__link-title\" }, attachment.title),\r\n                    React.createElement(\"p\", { className: \"pn-msg__link-description\" }, attachment.description))))));\r\n    };\r\n    return (React.createElement(\"div\", { className: \"pn-msg-list pn-msg-list--\".concat(theme) },\r\n        unreadMessages > 0 && (React.createElement(\"div\", { className: \"pn-msg-list__unread\", onClick: function () { return scrollToBottom(); } },\r\n            unreadMessages,\r\n            \" new message\",\r\n            unreadMessages > 1 ? \"s\" : \"\",\r\n            \" \",\r\n            React.createElement(ArrowDownIcon, null))),\r\n        React.createElement(\"div\", { className: \"pn-msg-list-scroller\", onScroll: props.onScroll, ref: listRef },\r\n            !!props.fetchMessages && !paginationEnd && (React.createElement(\"span\", { ref: spinnerRef, className: \"pn-msg-list__spinner\" },\r\n                React.createElement(SpinnerIcon, null))),\r\n            React.createElement(\"div\", { className: \"pn-msg-list__spacer\" }),\r\n            (!props.fetchMessages || (!fetchingMessages && !messages.length)) &&\r\n                renderWelcomeMessages(),\r\n            messages && messages.map(function (m) { return renderItem(m); }),\r\n            props.children,\r\n            React.createElement(\"div\", { className: \"pn-msg-list__bottom-ref\", ref: endRef }),\r\n            props.reactionsPicker && (React.createElement(\"div\", { className: \"pn-msg-list__emoji-picker \".concat(!emojiPickerShown && \"pn-msg-list__emoji-picker-hidden\"), ref: pickerRef }, picker)))));\r\n};\r\nMessageList.defaultProps = {\r\n    enableReactions: false,\r\n    fetchMessages: 0,\r\n};\r\n//# sourceMappingURL=message-list.js.map","references":["/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/@types/react/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/@types/pubnub/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/pubnub-react/dist/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/jotai/index.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/node_modules/jotai/utils.d.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/src/types.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/src/state-atoms.ts","/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/src/helpers.ts"],"map":"{\"version\":3,\"file\":\"message-list.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/message-list/message-list.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/rajmohan/Desktop/edvoy/rnd/react-chat-components/lib/node_modules/.cache/rollup-plugin-typescript2/placeholder/message-list/message-list.d.ts","writeByteOrderMark":false,"text":"import { FC, ReactElement, ReactNode, UIEvent } from \"react\";\r\nimport { UserEntity, MessageEnvelope, EmojiPickerElementProps } from \"../types\";\r\nimport \"./message-list.scss\";\r\nexport interface MessageRendererProps {\r\n    isOwn: boolean;\r\n    message: MessageEnvelope;\r\n    time: string;\r\n    editedText: string;\r\n    user?: UserEntity;\r\n}\r\nexport interface MessageListProps {\r\n    children?: ReactNode;\r\n    /** Option to fetch past messages from storage and display them on a channel. Set a number from \"0\" to \"100\". Defaults to \"0\" to fetch no messages from storage. */\r\n    fetchMessages?: number;\r\n    /** Option to enable rendering reactions that were added to messages. Make sure to also set up reactionsPicker when this option is enabled. */\r\n    enableReactions?: boolean;\r\n    /** Option to provide custom welcome messages to replace the default ones. Set to \"false\" to disable it. */\r\n    welcomeMessages?: false | MessageEnvelope | MessageEnvelope[];\r\n    /** Option to enable message reactions. Pass it in the emoji picker component. For more details, refer to the Emoji Pickers section in the docs. */\r\n    reactionsPicker?: ReactElement<EmojiPickerElementProps>;\r\n    /** Option to provide an extra actions renderer to add custom action buttons to each message. */\r\n    extraActionsRenderer?: (message: MessageEnvelope) => JSX.Element;\r\n    /** Option to provide a custom message item renderer if themes and CSS variables aren't enough. */\r\n    messageRenderer?: (props: MessageRendererProps) => JSX.Element;\r\n    /** Option to provide a custom message bubble renderer if themes and CSS variables aren't enough. */\r\n    bubbleRenderer?: (props: MessageRendererProps) => JSX.Element;\r\n    /** Option to render only selected messages. */\r\n    filter?: (message: MessageEnvelope) => boolean;\r\n    /** Callback run on a list scroll. */\r\n    onScroll?: (event: UIEvent<HTMLElement>) => unknown;\r\n}\r\n/**\r\n * Fetches historical messages using the scrolling pagination pattern and subscribes to the current\r\n * channel to stay up to date with new messages.\r\n *\r\n * It also displays data in an interactive list, including\r\n * user names, avatars, the time when a message was sent, and attachments (links, images) and allows to react to\r\n * messages with emojis and to show those reactions immediately.\r\n */\r\nexport declare const MessageList: FC<MessageListProps>;\r\n"}}
